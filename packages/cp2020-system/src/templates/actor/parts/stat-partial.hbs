{{systemLog ' STATS | ' this}}
<article class="fieldset edgerunner-sheet__stats">
  <div class="legend">Stats</div>
  {{#each this}}
  {{#unless (eq @key 'constants')}}
    {{systemLog ' STAT | ' @key}}
    {{#cp2020-fieldBox class=(concat 'edgerunner__stat--level-' scaleValue)}}
      <details class="edgerunner__stat--inner">
        <summary class="stat__total stat--level-{{total}}">
          <h3 class="stat__total--value">
            <abbr>[{{abbr}}]</abbr>
            <value>{{total}}</value>
          </h3>
        </summary>
        {{#if rollFormula}}
        <div class="edgerunner__stat--details">
          <label class="stat__component">
            <input
              name="{{concat 'system.stats.' @key '.natural'}}"
              type="number"
              value="{{natural}}"
            >
            <small>
              {{localize (concat @root.constants.SYSTEM_NAME '.stats.base')}}
            </small>
          </label>
          <label class="stat__component">
            <input
              name="{{concat 'system.stats.' @key '.modifier'}}"
              type="number"
              value="{{modifier}}"
            >
            <small>
              {{localize (concat @root.constants.SYSTEM_NAME '.stats.mod')}}
            </small>
          </label>
        </div>{{/if}}
      </details>
      {{cp2020-progress
        class="stat__total--bar"
        max=max
        min=min
        value=total
      }}
      <small class="stat__name">{{name}}</small>
      <div class="stat__buttons-row">
        {{#if rollFormula}}
        <button
          data-flavor="[{{localize (concat @root.constants.SYSTEM_NAME '.stats.flavor.check')}}] {{name}}"
          data-roll-formula="{{rollFormula}}"
          data-selector="stat-roll"
          class="stat__roll die--d-10">
        </button>
        {{/if}}
        {{#if saveFormula}}
        <button
          data-flavor="[{{localize (concat @root.constants.SYSTEM_NAME '.stats.flavor.save')}}] {{name}}"
          data-roll-formula="{{saveFormula}}"
          data-selector="stat-roll"
          class="stat__roll die--d-10 die--d-10--save">
        </button>
        {{/if}}
      </div>
    {{/cp2020-fieldBox}}
    {{/unless}}
  {{/each}}
</article>