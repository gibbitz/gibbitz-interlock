{{systemLog ' Weapon | ' this}}
<form class="{{cssClass}}" autocomplete="off">
  {{cp2020-outfitHeader
  name=item.name
  label=(concat @root.constants.SYSTEM_NAME '.items.weapon.label')
  }}

  {{!-- Sheet Tab Navigation --}}
  <nav class="sheet-tabs tabs" data-selector="primary-tabs" data-group="primary">
    <a class="item" data-tab="description">Description</a>
    <a class="item" data-tab="specs">Specs</a>
    <a class="item" data-tab="upgrades">Upgrades</a>
  </nav>

  {{!-- Sheet Body --}}
  <section data-selector="primary-tab-body">

    {{!-- Description Tab --}}
    <article class="tab" data-group="primary" data-tab="description">
      {{itemDetails this}}
    </article>

    {{!-- Specs Tab --}}
    <article class="tab specs" data-group="primary" data-tab="specs">
      {{!-- Common Weapon Info --}}
      <aside>
        <div>
          {{cp2020-select
            label=(concat @root.constants.SYSTEM_NAME '.items.weapon.type.long')
            name="system.type"
            value=item.system.type
            options=@root.constants.WEAPON_TYPE_SELECT_OPTIONS
            inverted=true
          }}
          {{cp2020-input
            label=(concat @root.constants.SYSTEM_NAME '.items.weapon.damage.long')
            name="system.damage"
            type="text"
            value=item.system.damage
          }}
          {{cp2020-select
            label=(concat @root.constants.SYSTEM_NAME '.items.weapon.conceal.long')
            name="system.concealability"
            value=item.system.concealability
            options=@root.constants.WEAPON_CONCEALABILITY_SELECT_OPTIONS
          }}
          {{cp2020-input
            label=(concat @root.constants.SYSTEM_NAME '.items.weapon.accuracy.long')
            name="system.accuracy"
            type='number'
            value=item.system.accuracy
          }}
        </div>

        {{!-- Ranged Weapon Info --}}
        {{!-- TODO: Show/hide based on type --}}
        <div>
          {{cp2020-input
            label=(concat @root.constants.SYSTEM_NAME '.items.weapon.range')
            name="system.range"
            type='number'
            value=item.system.range
          }}
          {{cp2020-input
            label=(concat @root.constants.SYSTEM_NAME '.items.weapon.magazine.long')
            name="system.magazine"
            type='number'
            value=item.system.magazine
          }}
          {{cp2020-input
            label=(concat @root.constants.SYSTEM_NAME '.items.weapon.cartridge.long')
            name="system.cartridge"
            type='text'
            value=item.system.cartridge
          }}
          {{!--cp2020-input
            label=(concat @root.constants.SYSTEM_NAME '.items.weapon.rateOfFire.long')
            name="system.rateOfFire"
            type='text'
            value=item.system.rateOfFire
          --}}
          {{cp2020-arrayEditor
            name='system.rateOfFire'
            type='number'
            uuid=item._id
            label=(concat @root.constants.SYSTEM_NAME '.items.weapon.rateOfFire.long')
            childLabel=(concat @root.constants.SYSTEM_NAME '.items.weapon.rateOfFire.perTurn')
            addLabel=(concat @root.constants.SYSTEM_NAME '.items.weapon.rateOfFire.newRow')
            deleteLabel=(concat @root.constants.SYSTEM_NAME '.items.weapon.rateOfFire.deleteRow')
            values=item.system.rateOfFire
          }}
        </div>
        <div>
          {{cp2020-input
            label=(concat @root.constants.SYSTEM_NAME '.items.weapon.blastRadius.long')
            name="system.blastRadius"
            type='number'
            value=item.system.blastRadius
          }}
        </div>
      </aside>
      {{outfitSpecs this}}
    </article>
    {{!-- Upgrades Tab --}}
    <article class="tab upgrades" data-group="primary" data-tab="upgrades">
      {{!-- Weapon Mods --}}
      <aside>
        {{#if item.system.upgrades}}
        <ul>
          {{#each item.system.upgrades}}
            <li>{{name}} | {{system.property}} {{system.value}}</li>
          {{/each}}
        </ul>
        {{else}}
        There are no upgrades here. Soooo vanilla!
        {{/if}}
      </aside>
    </article>

  </section>
</form>